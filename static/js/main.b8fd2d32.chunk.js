(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{230:function(e,t,r){},439:function(e,t,r){"use strict";r.r(t);var n,c=r(3),a=r(2),i=r.n(a),s=r(22),o=r.n(s),d=(r(230),r(15)),l=r(455),j=r(440),u=r(46),h=function(){return Object(c.jsxs)(l.a,{variant:"outlined",style:{marginTop:"40px",marginBottom:"25px"},children:[Object(c.jsx)(j.a,{component:u.b,to:"/",children:"Now"}),Object(c.jsx)(j.a,{component:u.b,to:"/hourly",children:"Hourly"}),Object(c.jsx)(j.a,{component:u.b,to:"/forecast",children:"Forecast"})]})},p=r(35),b=r(36),x=r(52),O=r(57),m=r(37),f=r(38),y=(r(236),r(456)),g=r(457),v=r(82),I=r(11),T=function(e){var t=Object(c.jsx)(I.a,{size:e.size,color:"#7d8b8e"});return e.iconId>=200&&e.iconId<300&&(t=Object(c.jsx)(I.q,{size:e.size,color:"#7d8b8e"})),e.iconId>=300&&e.iconId<400&&(t=Object(c.jsx)(I.i,{size:e.size,color:"#96a7af"})),e.iconId>=500&&e.iconId<600&&(t=Object(c.jsx)(I.h,{size:e.size,color:"#83c2d3"})),e.iconId>=600&&e.iconId<700&&(t=Object(c.jsx)(I.j,{size:e.size,color:"#97becf"})),e.iconId>=700&&e.iconId<800&&(t=Object(c.jsx)(I.f,{size:e.size,color:"#becbd1"})),800===e.iconId&&(t=Object(c.jsx)(I.e,{size:e.size,color:"#edcf53"})),e.iconId>800&&e.iconId<900&&(t=Object(c.jsx)(I.d,{size:e.size,color:"#becbd1"})),Object(c.jsx)(i.a.Fragment,{children:t})},E=function(e){return Object(c.jsxs)(y.a,{container:!0,spacing:2,style:{marginBottom:"40px",width:"98%"},children:[Object(c.jsx)(y.a,{item:!0,xs:6,children:Object(c.jsx)("div",{style:{textAlign:"right"},children:Object(c.jsx)(T,{iconId:e.weatherIconId,size:140})})}),Object(c.jsx)(y.a,{item:!0,xs:6,children:Object(c.jsxs)("div",{style:{textAlign:"left"},children:[Object(c.jsx)(v.Spring,{from:{number:0},to:{number:e.temperature},children:function(e){return Object(c.jsxs)(g.a,{variant:"h2",className:"typography-primary",children:[e.number.toFixed(),"\xb0"]})}}),Object(c.jsxs)(g.a,{variant:"h6",className:"typography-primary",children:["Feels like ",e.feelsLike,"\xb0"]}),Object(c.jsx)(g.a,{variant:"subtitle1",className:"typography-secondary",children:e.description})]})})]})};!function(e){e[e.PRECIPITATION_CHANCE=0]="PRECIPITATION_CHANCE",e[e.WIND=1]="WIND",e[e.UV_INDEX=2]="UV_INDEX",e[e.CLOUD_COVER=3]="CLOUD_COVER",e[e.PRESSURE=4]="PRESSURE",e[e.HUMIDITY=5]="HUMIDITY",e[e.DEW_POINT=6]="DEW_POINT",e[e.VISIBILITY=7]="VISIBILITY",e[e.SUNRISE=8]="SUNRISE",e[e.SUNSET=9]="SUNSET"}(n||(n={}));var w,k=n,S=function(e){var t=Object(c.jsx)(I.a,{size:42}),r="NA",n="NA";switch(e.itemType){case k.PRECIPITATION_CHANCE:t=Object(c.jsx)(I.s,{size:42,color:"#666"}),r=e.value+" %",n="Chance";break;case k.WIND:t=Object(c.jsx)(I.l,{size:42,color:"#becbd1"}),r=e.value+" km/h",n="Wind speed";break;case k.UV_INDEX:t=Object(c.jsx)(I.k,{size:42,color:"#cbad33"}),r=e.value,n="UV index";break;case k.CLOUD_COVER:t=Object(c.jsx)(I.c,{size:42,color:"#becbd1"}),r=e.value+" %",n="Cloud cover";break;case k.PRESSURE:t=Object(c.jsx)(I.b,{size:42,color:"#666"}),r=e.value+" mmHg",n="Pressure";break;case k.HUMIDITY:t=Object(c.jsx)(I.g,{size:42,color:"#86c3d6"}),r=e.value+" %",n="Humidity";break;case k.DEW_POINT:t=Object(c.jsx)(I.p,{size:42,color:"#86c3d6"}),r=e.value+" \xb0",n="Dew point";break;case k.VISIBILITY:t=Object(c.jsx)(I.r,{size:42,color:"#999"}),r=e.value+" km",n="Visibility";break;case k.SUNRISE:t=Object(c.jsx)(I.m,{size:42,color:"#edcf53"}),r=e.value,n="Sunrise";break;case k.SUNSET:t=Object(c.jsx)(I.n,{size:42,color:"#edcf53"}),r=e.value,n="Sunset"}return Object(c.jsxs)(y.a,{container:!0,spacing:2,style:{marginTop:"1px"},children:[Object(c.jsx)(y.a,{item:!0,xs:4,children:Object(c.jsx)("div",{style:{textAlign:"right"},children:t})}),Object(c.jsx)(y.a,{item:!0,xs:8,children:Object(c.jsxs)("div",{style:{textAlign:"left"},children:[Object(c.jsx)(g.a,{variant:"subtitle2",className:"typography-primary",children:Object(c.jsx)("strong",{children:r})}),Object(c.jsx)(g.a,{variant:"body2",className:"typography-secondary",children:n})]})})]})},W=function(e){var t=new Date(e);return t.getHours()+":"+t.getMinutes()},N=function(e){var t=new Date(e);return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]+" "+t.getDate()},C=function(e){return Object(c.jsx)(v.Spring,{from:{opacity:0},to:{opacity:1},children:function(t){return Object(c.jsx)("div",{style:t,children:Object(c.jsx)("div",{style:{margin:"auto",width:"80%"},children:Object(c.jsxs)(y.a,{container:!0,spacing:2,children:[Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.PRECIPITATION_CHANCE,value:e.precipitation})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.WIND,value:e.currentWeather.windSpeed})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.UV_INDEX,value:e.currentWeather.uvi})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.CLOUD_COVER,value:e.currentWeather.clouds})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.PRESSURE,value:e.currentWeather.pressure})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.HUMIDITY,value:e.currentWeather.humidity})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.DEW_POINT,value:e.currentWeather.dewPoint})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.VISIBILITY,value:e.currentWeather.visibility})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.SUNRISE,value:W(e.currentWeather.sunrise)})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(S,{itemType:k.SUNSET,value:W(e.currentWeather.sunset)})})]})})})}})},R=r(458),A=function(){return Object(c.jsxs)("div",{style:{margin:"50px 0"},children:[Object(c.jsx)(R.a,{}),Object(c.jsx)(g.a,{variant:"subtitle1",children:"Fetching Weather"})]})},P=r(180),U=r.n(P),D=function(){function e(){Object(p.a)(this,e)}return Object(b.a)(e,null,[{key:"getBaseAPI",value:function(){return"https://api.openweathermap.org/data/2.5"}},{key:"getApiDefaultParams",value:function(){return"onecall?exclude=minutely&units=metric&appid="+this.buildApi(!0)}},{key:"getApiLocK",value:function(){return this.buildApi(!1)}},{key:"buildApi",value:function(e){var t=e?"f20b5ed34066a6c3d54f18fb73f573adms":"blank";return t.replace(t.substring(t.length-2,t.length),"")}}]),e}(),z=U.a.create({baseURL:D.getBaseAPI()||"https://raw.githubusercontent.com/Predator7/react-weather/main/src/sample-api/weather.json"}),_="FETCH_WEATHER_REQUEST",F="FETCH_WEATHER_SUCCESS",L="FETCH_WEATHER_FAILURE",H=function(e){return{latitude:e.lat,longitude:e.lon,timezoneOffset:1e3*e.timezone_offset}},M=function(e){var t=V(e.weather);return{dt:1e3*e.dt,sunrise:1e3*e.sunrise,sunset:1e3*e.sunset,temp:e.temp.toFixed(0),feelsLike:e.feels_like.toFixed(0),pressure:e.pressure,humidity:e.humidity,dewPoint:e.dew_point.toFixed(0),uvi:e.uvi,clouds:e.clouds,visibility:e.visibility/1e3,windSpeed:e.wind_speed.toFixed(0),weather:t}},V=function(e){return e.map((function(e){return{id:e.id,main:e.main,description:e.description}}))},B=function(e){return e.map((function(e){return{dt:1e3*e.dt,temp:e.temp.toFixed(0),windSpeed:e.wind_speed.toFixed(0),precipitation:+(100*e.pop).toFixed(0),weather:V(e.weather)}}))},Y=function(e){return e.map((function(e){return{dt:1e3*e.dt,precipitation:+(100*e.pop).toFixed(0),maxTemp:+e.temp.max.toFixed(0),minTemp:+e.temp.min.toFixed(0),windSpeed:+e.wind_speed.toFixed(0),uvi:e.uvi,clouds:e.clouds,pressure:e.pressure,sunrise:1e3*e.sunrise,sunset:1e3*e.sunset,weather:V(e.weather)}}))},X=function(e,t){return function(r){r({type:_,loading:!0,error:"",weather:{}}),z.get("/"+D.getApiDefaultParams(),{params:{lat:e,lon:t}}).then((function(e){var t,n;console.log(e.data),r((n=e.data,t={coordinates:H(n),currentWeather:M(n.current),hourlyWeather:B(n.hourly),forecast:Y(n.daily)},{type:F,loading:!1,error:"",weather:t}))})).catch((function(e){console.log(e.message),r({type:L,loading:!1,error:"Something went wrong fetching weather",weather:{}})}))}},K=function(e){Object(x.a)(r,e);var t=Object(O.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onLoadWeather=function(){var t=Object(c.jsx)(A,{});return e.props.weather.currentWeather&&(t=Object(c.jsxs)("div",{children:[Object(c.jsx)(E,{temperature:e.props.weather.currentWeather.temp,feelsLike:e.props.weather.currentWeather.feelsLike,description:e.props.weather.currentWeather.weather[0].description,weatherIconId:e.props.weather.currentWeather.weather[0].id}),Object(c.jsx)(C,{currentWeather:e.props.weather.currentWeather,precipitation:e.props.weather.hourlyWeather[0].precipitation})]})),t},e}return Object(b.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.weather.currentWeather||"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){e.props.fetchWeather(t.coords.latitude,t.coords.longitude)}),(function(t){console.log(t.message),e.props.fetchWeather(45.43,28.04)}))}},{key:"render",value:function(){return Object(c.jsx)("div",{children:this.onLoadWeather()})}}]),r}(a.Component),J=Object(m.b)((function(e){return{weather:e.weatherReducer.weather}}),(function(e){return{fetchWeather:Object(f.b)(X,e)}}))(K),q=r(460),Q=r(181),G=r(113),Z=r(459),$=function(e){return Object(c.jsxs)(y.a,{container:!0,spacing:2,children:[Object(c.jsx)(y.a,{item:!0,xs:2,md:1}),Object(c.jsx)(y.a,{item:!0,xs:10,md:11,children:Object(c.jsxs)("div",{style:{textAlign:"left",marginLeft:"8px",marginBottom:"20px"},children:[Object(c.jsx)(g.a,{variant:"subtitle1",className:"typography-secondary",children:e.forecast.weather[0].description}),Object(c.jsxs)(y.a,{container:!0,spacing:2,style:{marginTop:"15px"},children:[Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.WIND,value:e.forecast.windSpeed})})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.CLOUD_COVER,value:e.forecast.clouds})})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.UV_INDEX,value:e.forecast.uvi})})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.PRESSURE,value:e.forecast.pressure})})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.SUNRISE,value:W(e.forecast.sunrise)})})}),Object(c.jsx)(y.a,{item:!0,xs:6,md:4,lg:3,children:Object(c.jsx)(Z.a,{variant:"outlined",style:{background:"transparent"},children:Object(c.jsx)(S,{itemType:k.SUNSET,value:W(e.forecast.sunset)})})})]})]})})]})},ee=function(e){return Object(c.jsxs)(y.a,{container:!0,spacing:2,style:{margin:"auto",width:"95%"},children:[Object(c.jsx)(y.a,{item:!0,xs:2,md:1,children:Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)(T,{iconId:e.forecast.weather[0].id,size:58})})}),Object(c.jsx)(y.a,{item:!0,xs:8,md:10,children:Object(c.jsxs)("div",{style:{textAlign:"left"},children:[Object(c.jsx)(g.a,{variant:"h6",className:"typography-primary",children:Object(c.jsx)("strong",{children:N(e.forecast.dt)})}),Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(I.s,{size:20,color:"#7d8b8e"}),Object(c.jsxs)(g.a,{variant:"subtitle2",className:"typography-secondary",style:{marginRight:"20px"},children:[e.forecast.precipitation," %"]}),Object(c.jsx)(I.o,{size:20,color:"#86c3d6"}),Object(c.jsxs)(g.a,{variant:"subtitle2",className:"typography-secondary",children:[e.forecast.maxTemp,"\xb0 | ",e.forecast.minTemp,"\xb0"]})]})]})}),Object(c.jsx)(y.a,{item:!0,xs:2,md:1,children:Object(c.jsx)("div",{style:{textAlign:"right"},children:Object(c.jsx)(q.a,{onClick:e.expandClick,children:e.expanded?Object(c.jsx)(G.a,{size:32}):Object(c.jsx)(G.b,{size:32})})})}),Object(c.jsx)(Q.UnmountClosed,{isOpened:e.expanded,children:Object(c.jsx)($,{forecast:e.forecast})})]})},te=function(e){Object(x.a)(r,e);var t=Object(O.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={expanded:[]},e.initLocalState=function(t){for(var r=[],n=0;n<t;n++)r.push(!1);e.setState((function(){return{expanded:r}}))},e.onExpandClick=function(t){e.setState((function(e){return{expanded:e.expanded.map((function(e,r){return r===t?!e:e}))}}))},e.fetchWeatherForecast=function(){var t=[Object(c.jsx)(A,{},"fetching")];return e.props.forecast&&(t=e.props.forecast.map((function(t,r){return Object(c.jsx)(ee,{forecast:t,expanded:e.state.expanded[r],expandClick:function(){return e.onExpandClick(r)}},t.dt)}))),t},e}return Object(b.a)(r,[{key:"componentDidMount",value:function(){this.props.forecast&&0===this.state.expanded.length&&this.initLocalState(this.props.forecast.length)}},{key:"render",value:function(){return Object(c.jsx)("div",{children:this.fetchWeatherForecast()})}}]),r}(a.Component),re=Object(m.b)((function(e){return{forecast:e.weatherReducer.weather.forecast}}))(te);!function(e){e[e.TEMPERATURE=0]="TEMPERATURE",e[e.WIND=1]="WIND",e[e.PRECIPITATION=2]="PRECIPITATION"}(w||(w={}));var ne=w,ce=r(114),ae=r(25),ie=function(e){var t="";if(e.active)switch(e.chartType){case ne.TEMPERATURE:t="Temperature: "+e.payload[0].payload.temp+"\xb0";break;case ne.WIND:t="Wind: "+e.payload[0].payload.windSpeed+" km/h";break;case ne.PRECIPITATION:t="Precipitation: "+e.payload[0].payload.precipitation+"%";break;default:t="Temperature: "+e.payload[0].payload.temp+"\xb0"}var r=null;return e.active&&(r=Object(c.jsxs)(Z.a,{elevation:1,style:{padding:"5px"},children:[Object(c.jsx)(g.a,{children:Object(c.jsxs)("strong",{children:[e.payload[0].payload.dt,":00"]})}),Object(c.jsx)(g.a,{children:t})]})),Object(c.jsx)(i.a.Fragment,{children:r})},se=function(e){var t=[];e.hourlyWeather.forEach((function(e,r){var n,c=Object(ce.a)(Object(ce.a)({},e),{},{dt:(n=e.dt,new Date(n).getHours())});r%3===0&&t.push(c)}));var r="temp",n="\xb0C";switch(e.chartType){case ne.TEMPERATURE:r="temp",n="\xb0C";break;case ne.WIND:r="windSpeed",n="km/h";break;case ne.PRECIPITATION:r="precipitation",n="(%)";break;default:n="\xb0C"}return Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(q.a,{color:e.chartType===ne.TEMPERATURE?"primary":"default",onClick:function(){return e.chartTypeHandler(ne.TEMPERATURE)},children:Object(c.jsx)(I.o,{size:32})}),Object(c.jsx)(q.a,{color:e.chartType===ne.WIND?"primary":"default",onClick:function(){return e.chartTypeHandler(ne.WIND)},children:Object(c.jsx)(I.l,{size:32})}),Object(c.jsx)(q.a,{color:e.chartType===ne.PRECIPITATION?"primary":"default",onClick:function(){return e.chartTypeHandler(ne.PRECIPITATION)},children:Object(c.jsx)(I.s,{size:32})})]}),Object(c.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(c.jsx)(ae.e,{width:"90%",height:250,children:Object(c.jsxs)(ae.d,{margin:{top:35,left:10,right:10},data:t,children:[Object(c.jsxs)(ae.g,{dataKey:"dt",tickLine:!1,tick:Object(c.jsx)("div",{}),children:[Object(c.jsx)(ae.b,{position:"insideBottomLeft",offset:0,value:"Now"}),Object(c.jsx)(ae.b,{position:"insideBottom",offset:0,value:"24h"}),Object(c.jsx)(ae.b,{position:"insideBottomRight",offset:0,value:"48h"})]}),Object(c.jsx)(ae.h,{dataKey:r,width:30,tickLine:!1,axisLine:!1,children:Object(c.jsx)(ae.b,{position:"top",offset:20,value:n})}),Object(c.jsx)(ae.a,{stroke:"#eee",strokeDasharray:"3 5",horizontal:!1}),Object(c.jsx)(ae.f,{content:Object(c.jsx)(ie,{chartType:e.chartType})}),Object(c.jsx)(ae.c,{dataKey:r,strokeWidth:2})]})})})]})},oe=function(e){Object(x.a)(r,e);var t=Object(O.a)(r);function r(){var e;Object(p.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={chartType:ne.TEMPERATURE},e.fetchHourlyWeather=function(){var t=Object(c.jsx)(A,{},"fetching");return e.props.hourlyWeather&&(t=Object(c.jsx)(se,{hourlyWeather:e.props.hourlyWeather,chartType:e.state.chartType,chartTypeHandler:function(t){return e.onChartButtonClick(t)}})),t},e.onChartButtonClick=function(t){e.setState((function(e){return{chartType:t}}))},e}return Object(b.a)(r,[{key:"render",value:function(){return Object(c.jsx)("div",{children:this.fetchHourlyWeather()})}}]),r}(a.Component),de=Object(m.b)((function(e){return{hourlyWeather:e.weatherReducer.weather.hourlyWeather}}))(oe);var le=Object(d.g)((function(){return Object(c.jsxs)(i.a.Fragment,{children:[Object(c.jsx)(h,{}),Object(c.jsxs)(d.d,{children:[Object(c.jsx)(d.b,{path:"/hourly",component:de}),Object(c.jsx)(d.b,{path:"/forecast",component:re}),Object(c.jsx)(d.b,{path:"/",component:J}),Object(c.jsx)(d.a,{to:"/"})]})]})})),je=r(191),ue=r(192),he={loading:!1,error:"",weather:{}},pe=function(e){return{loading:!1,error:"",weather:e.weather}},be=function(e){return{loading:!1,error:e.error,weather:{}}},xe=Object(ue.createLogger)(),Oe=Object(f.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0,error:"",weather:{}};case F:return pe(t);case L:return be(t);default:return e}}}),me=Object(f.d)(Oe,Object(f.a)(je.a,xe));o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(m.a,{store:me,children:Object(c.jsx)(u.a,{children:Object(c.jsx)(le,{})})})}),document.getElementById("root"))}},[[439,1,2]]]);
//# sourceMappingURL=main.b8fd2d32.chunk.js.map